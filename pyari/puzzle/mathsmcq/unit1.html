<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ Adventure: Fun with Shapes</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: 'Nunito' for a friendly, rounded look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Tone.js for sound effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>

    <style>
        /* Custom styles for the new green/nature theme */
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0fdf4; /* Light green background */
        }
        .quiz-container {
            background: linear-gradient(135deg, #ffffff, #dcfce7);
            box-shadow: 0 10px 25px rgba(15, 95, 48, 0.1);
            border: 1px solid #bbf7d0;
        }
        .quiz-container:hover {
            transform: translateY(-5px);
        }
        .btn {
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .option-btn {
            border: 2px solid transparent;
        }
        .option-btn.selected {
            background-color: #86efac; /* A light green for selected */
            color: #14532d;
            border-color: #22c55e;
        }
        .option-btn.correct {
            background-color: #22c55e; /* Green for correct */
            color: white;
            border-color: #15803d;
        }
        .option-btn.wrong {
            background-color: #f43f5e; /* Rose for wrong */
            color: white;
            border-color: #be123c;
        }
        .progress-bar-inner {
            transition: width 0.5s ease-in-out;
        }
        /* Animation for screen transitions */
        .screen {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-green-50 flex items-center justify-center min-h-screen p-4">

    <div id="app-container" class="w-full max-w-md mx-auto">

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen text-center p-6 quiz-container rounded-2xl">
            <h1 id="welcome-title" class="text-4xl font-black text-green-700 mb-2">MCQ Adventure!</h1>
            <p id="welcome-subtitle" class="text-lg text-stone-600 mb-6">Let's learn about Shapes!</p>
            <img src="https://placehold.co/400x200/22c55e/ffffff?text=Ready+for+Shapes%3F&font=nunito" class="rounded-xl mb-6 shadow-lg" alt="Shapes Adventure Start">
            
            <div id="language-selection">
                 <p class="font-bold mb-4 text-stone-700">Choose your language / ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥≠‡¥æ‡¥∑ ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï</p>
                 <div class="flex space-x-4">
                    <button onclick="setLanguage('en')" class="w-full btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-xl text-lg">English</button>
                    <button onclick="setLanguage('ml')" class="w-full btn bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl text-lg">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</button>
                 </div>
            </div>

            <button id="start-quiz-btn" class="w-full btn bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-xl text-xl mt-6 hidden">
                Start Quiz
            </button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="screen hidden">
            <div class="quiz-container rounded-2xl p-6">
                <!-- Header with Progress -->
                <div class="mb-4">
                    <p class="text-sm text-stone-500"><span id="question-label">Question</span> <span id="question-number"></span> <span id="of-label">of</span> <span id="total-questions"></span></p>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mt-1">
                        <div id="progress-bar" class="bg-lime-400 h-2.5 rounded-full progress-bar-inner" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Question Text -->
                <h2 id="question-text" class="text-2xl font-bold text-stone-800 mb-6 min-h-[120px]"></h2>

                <!-- Options -->
                <div id="options-container" class="space-y-3">
                    <!-- Options will be dynamically inserted here -->
                </div>

                <!-- Feedback Message -->
                <div id="feedback-message" class="mt-4 text-center font-bold min-h-[24px]"></div>

            </div>
            
            <!-- Navigation Buttons -->
            <div class="flex justify-between mt-6">
                <button id="back-btn" class="btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-8 rounded-xl">Back</button>
                <button id="next-btn" class="btn bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-xl">Next</button>
                <button id="submit-btn" class="btn hidden bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-8 rounded-xl">Submit</button>
            </div>
        </div>

        <!-- Review Screen -->
        <div id="review-screen" class="screen hidden">
             <div class="quiz-container rounded-2xl p-6 text-center">
                <h2 id="review-title" class="text-3xl font-black text-green-800 mb-2">Quiz Complete!</h2>
                <p id="review-subtitle" class="text-lg text-stone-600 mb-4">Great job! Here's your score:</p>
                <div class="bg-lime-200 rounded-full w-32 h-32 flex items-center justify-center mx-auto mb-6 shadow-inner">
                    <span id="final-score" class="text-4xl font-bold text-lime-800"></span>
                </div>
             </div>
             <div id="review-content" class="mt-6 space-y-4">
                <!-- Review details will be inserted here -->
             </div>
             <button id="restart-quiz-btn" class="w-full mt-6 btn bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-xl text-xl">
                Play Again
            </button>
        </div>

    </div>

    <script>
        // --- DOM Elements ---
        const welcomeScreen = document.getElementById('welcome-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const reviewScreen = document.getElementById('review-screen');
        const languageSelection = document.getElementById('language-selection');

        const startQuizBtn = document.getElementById('start-quiz-btn');
        const backBtn = document.getElementById('back-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const restartQuizBtn = document.getElementById('restart-quiz-btn');

        const questionNumberEl = document.getElementById('question-number');
        const totalQuestionsEl = document.getElementById('total-questions');
        const progressBar = document.getElementById('progress-bar');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackMessage = document.getElementById('feedback-message');
        
        const finalScoreEl = document.getElementById('final-score');
        const reviewContent = document.getElementById('review-content');
        
        // --- UI Text Elements for Translation ---
        const welcomeTitle = document.getElementById('welcome-title');
        const welcomeSubtitle = document.getElementById('welcome-subtitle');
        const questionLabel = document.getElementById('question-label');
        const ofLabel = document.getElementById('of-label');
        const reviewTitle = document.getElementById('review-title');
        const reviewSubtitle = document.getElementById('review-subtitle');

        // --- Bilingual Data ---
        const uiText = {
            en: {
                welcomeTitle: "MCQ Adventure!",
                welcomeSubtitle: "Let's learn about Shapes!",
                startBtn: "Start Quiz",
                questionLabel: "Question",
                ofLabel: "of",
                backBtn: "Back",
                nextBtn: "Next",
                submitBtn: "Submit",
                reviewTitle: "Quiz Complete!",
                reviewSubtitle: "Great job! Here's your score:",
                reviewHeader: "Your Review",
                yourAnswer: "Your answer:",
                correctAnswer: "Correct answer:",
                notAnswered: "Not answered",
                playAgainBtn: "Play Again",
                correctFeedback: "Correct! üéâ",
            },
            ml: {
                welcomeTitle: "MCQ ‡¥∏‡¥æ‡¥π‡¥∏‡¥ø‡¥ï‡¥Ç!",
                welcomeSubtitle: "‡¥∞‡µÇ‡¥™‡¥ô‡µç‡¥ô‡¥≥‡µÜ‡¥ï‡µç‡¥ï‡µÅ‡¥±‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥™‡¥†‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥Ç!",
                startBtn: "‡¥ï‡µç‡¥µ‡¥ø‡¥∏‡µç ‡¥Ü‡¥∞‡¥Ç‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï",
                questionLabel: "‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥Ç",
                ofLabel: "/",
                backBtn: "‡¥™‡µÅ‡¥±‡¥ï‡µá‡¥æ‡¥ü‡µç‡¥ü‡µç",
                nextBtn: "‡¥Ö‡¥ü‡µÅ‡¥§‡µç‡¥§‡¥§‡µç",
                submitBtn: "‡¥∏‡¥Æ‡µº‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï",
                reviewTitle: "‡¥ï‡µç‡¥µ‡¥ø‡¥∏‡µç ‡¥™‡µÇ‡µº‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥æ‡¥Ø‡¥ø!",
                reviewSubtitle: "‡¥ï‡µä‡¥≥‡µç‡¥≥‡¥æ‡¥Ç! ‡¥á‡¥§‡¥æ ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥∏‡µç‡¥ï‡µã‡µº:",
                reviewHeader: "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥Ö‡¥µ‡¥≤‡µã‡¥ï‡¥®‡¥Ç",
                yourAnswer: "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥â‡¥§‡µç‡¥§‡¥∞‡¥Ç:",
                correctAnswer: "‡¥∂‡¥∞‡¥ø‡¥Ø‡¥æ‡¥Ø ‡¥â‡¥§‡µç‡¥§‡¥∞‡¥Ç:",
                notAnswered: "‡¥â‡¥§‡µç‡¥§‡¥∞‡¥Ç ‡¥®‡µΩ‡¥ï‡¥ø‡¥Ø‡¥ø‡¥≤‡µç‡¥≤",
                playAgainBtn: "‡¥µ‡µÄ‡¥£‡µç‡¥ü‡µÅ‡¥Ç ‡¥ï‡¥≥‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï",
                correctFeedback: "‡¥∂‡¥∞‡¥ø‡¥Ø‡¥æ‡¥£‡µç! üéâ",
            }
        };

        const quizData = [
            { en: { question: "How many sides does a rectangle have?", options: ["3", "4", "5", "6"], answer: "4" }, ml: { question: "‡¥í‡¥∞‡µÅ ‡¥ö‡¥§‡µÅ‡¥∞‡¥§‡µç‡¥§‡¥ø‡¥®‡µç (rectangle) ‡¥é‡¥§‡µç‡¥∞ ‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥£‡µç‡¥ü‡µç?", options: ["3", "4", "5", "6"], answer: "4" } },
            { en: { question: "Which shape has 3 sides and 3 corners?", options: ["Rectangle", "Square", "Circle", "Triangle"], answer: "Triangle" }, ml: { question: "‡¥è‡¥§‡µç ‡¥∞‡µÇ‡¥™‡¥§‡µç‡¥§‡¥ø‡¥®‡¥æ‡¥£‡µç 3 ‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç 3 ‡¥ï‡µã‡¥£‡µÅ‡¥ï‡¥≥‡µÅ‡¥Ç ‡¥â‡¥≥‡µç‡¥≥‡¥§‡µç?", options: ["‡¥ö‡¥§‡µÅ‡¥∞‡¥Ç", "‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥Ç", "‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥Ç", "‡¥§‡µç‡¥∞‡¥ø‡¥ï‡µã‡¥£‡¥Ç"], answer: "‡¥§‡µç‡¥∞‡¥ø‡¥ï‡µã‡¥£‡¥Ç" } },
            { en: { question: "What is special about the sides of a square?", options: ["All sides are different", "Opposite sides are equal", "All 4 sides are equal", "It has no sides"], answer: "All 4 sides are equal" }, ml: { question: "‡¥í‡¥∞‡µÅ ‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥§‡µç‡¥§‡¥ø‡µª‡µç‡¥±‡µÜ (square) ‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥™‡µç‡¥∞‡¥§‡µç‡¥Ø‡µá‡¥ï‡¥§‡¥Ø‡µÜ‡¥®‡µç‡¥§‡¥æ‡¥£‡µç?", options: ["‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥µ‡µç‡¥Ø‡¥§‡µç‡¥Ø‡¥∏‡µç‡¥§‡¥Æ‡¥æ‡¥£‡µç", "‡¥é‡¥§‡¥ø‡µº‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡µæ ‡¥§‡µÅ‡¥≤‡µç‡¥Ø‡¥Æ‡¥æ‡¥£‡µç", "4 ‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥§‡µÅ‡¥≤‡µç‡¥Ø‡¥Æ‡¥æ‡¥£‡µç", "‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡¥ø‡¥≤‡µç‡¥≤"], answer: "4 ‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥§‡µÅ‡¥≤‡µç‡¥Ø‡¥Æ‡¥æ‡¥£‡µç" } },
            { en: { question: "If you cut one corner of a rectangular paper, how many corners will it have?", options: ["3", "4", "5", "2"], answer: "5" }, ml: { question: "‡¥í‡¥∞‡µÅ ‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡¥≤‡¥æ‡¥∏‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥í‡¥∞‡µÅ ‡¥Æ‡µÇ‡¥≤ ‡¥Æ‡µÅ‡¥±‡¥ø‡¥ö‡µç‡¥ö‡¥æ‡µΩ ‡¥Ö‡¥§‡¥ø‡¥®‡µç ‡¥é‡¥§‡µç‡¥∞ ‡¥Æ‡µÇ‡¥≤‡¥ï‡¥≥‡µÅ‡¥£‡µç‡¥ü‡¥æ‡¥ï‡µÅ‡¥Ç?", options: ["3", "4", "5", "2"], answer: "5" } },
            { en: { question: "In the book, what did the children make using paper for the Ocean Day celebration ?", options: ["Boats", "Birds", "Fish", "Flowers"], answer: "Fish" }, ml: { question: "‡¥∏‡¥Æ‡µÅ‡¥¶‡µç‡¥∞‡¥¶‡¥ø‡¥®‡¥æ‡¥ò‡µã‡¥∑‡¥§‡µç‡¥§‡¥ø‡¥®‡¥æ‡¥Ø‡¥ø ‡¥ï‡µÅ‡¥ü‡µç‡¥ü‡¥ø‡¥ï‡µæ ‡¥ï‡¥ü‡¥≤‡¥æ‡¥∏‡µç ‡¥ï‡µä‡¥£‡µç‡¥ü‡µç ‡¥é‡¥®‡µç‡¥§‡¥æ‡¥£‡µç ‡¥â‡¥£‡µç‡¥ü‡¥æ‡¥ï‡µç‡¥ï‡¥ø‡¥Ø‡¥§‡µç?", options: ["‡¥µ‡¥û‡µç‡¥ö‡¥ø‡¥ï‡µæ", "‡¥™‡¥ï‡µç‡¥∑‡¥ø‡¥ï‡µæ", "‡¥Æ‡µÄ‡¥®‡µÅ‡¥ï‡µæ", "‡¥™‡µÇ‡¥ï‡µç‡¥ï‡µæ"], answer: "‡¥Æ‡µÄ‡¥®‡µÅ‡¥ï‡µæ" } },
            { en: { question: "A rectangle has opposite sides that are...", options: ["Different lengths", "Curved", "Equal in length", "Always short"], answer: "Equal in length" }, ml: { question: "‡¥í‡¥∞‡µÅ ‡¥ö‡¥§‡µÅ‡¥∞‡¥§‡µç‡¥§‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥é‡¥§‡¥ø‡µº‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡µæ...", options: ["‡¥µ‡µç‡¥Ø‡¥§‡µç‡¥Ø‡¥∏‡µç‡¥§ ‡¥®‡µÄ‡¥≥‡¥Æ‡µÅ‡¥≥‡µç‡¥≥‡¥µ‡¥Ø‡¥æ‡¥£‡µç", "‡¥µ‡¥≥‡¥û‡µç‡¥û‡¥§‡¥æ‡¥£‡µç", "‡¥§‡µÅ‡¥≤‡µç‡¥Ø ‡¥®‡µÄ‡¥≥‡¥Æ‡µÅ‡¥≥‡µç‡¥≥‡¥µ‡¥Ø‡¥æ‡¥£‡µç", "‡¥é‡¥™‡µç‡¥™‡µã‡¥¥‡µÅ‡¥Ç ‡¥ö‡µÜ‡¥±‡µÅ‡¥§‡¥æ‡¥£‡µç"], answer: "‡¥§‡µÅ‡¥≤‡µç‡¥Ø ‡¥®‡µÄ‡¥≥‡¥Æ‡µÅ‡¥≥‡µç‡¥≥‡¥µ‡¥Ø‡¥æ‡¥£‡µç" } },
            { en: { question: "Which 3D shape has all faces in the shape of a square? ", options: ["Square", "Cube", "Circle", "Pyramid"], answer: "Cube" }, ml: { question: "'‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü' ‡¥é‡¥®‡µç‡¥®‡µç ‡¥µ‡¥ø‡¥≥‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥® 3D ‡¥∞‡µÇ‡¥™‡¥Ç ‡¥è‡¥§‡¥æ‡¥£‡µç?", options: ["‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥Ç", "‡¥ï‡µç‡¥Ø‡µÇ‡¥¨‡µç", "‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥Ç", "‡¥™‡¥ø‡¥∞‡¥Æ‡¥ø‡¥°‡µç"], answer: "‡¥ï‡µç‡¥Ø‡µÇ‡¥¨‡µç" } },
            { en: { question: "A birthday party hat is usually in the shape of a...", options: ["Sphere", "Cube", "Cylinder", "Cone"], answer: "Cone" }, ml: { question: "‡¥í‡¥∞‡µÅ ‡¥ú‡¥®‡µç‡¥Æ‡¥¶‡¥ø‡¥® ‡¥§‡µä‡¥™‡µç‡¥™‡¥ø ‡¥∏‡¥æ‡¥ß‡¥æ‡¥∞‡¥£‡¥Ø‡¥æ‡¥Ø‡¥ø ‡¥è‡¥§‡µç ‡¥Ü‡¥ï‡µÉ‡¥§‡¥ø‡¥Ø‡¥ø‡¥≤‡¥æ‡¥£‡µç?", options: ["‡¥ó‡µã‡¥≥‡¥Ç", "‡¥ï‡µç‡¥Ø‡µÇ‡¥¨‡µç", "‡¥∏‡¥ø‡¥≤‡¥ø‡¥£‡µç‡¥ü‡µº", "‡¥ï‡µã‡µ∫ (‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥∏‡µç‡¥§‡µÇ‡¥™‡¥ø‡¥ï)"], answer: "‡¥ï‡µã‡µ∫ (‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥∏‡µç‡¥§‡µÇ‡¥™‡¥ø‡¥ï)" } },
            { en: { question: "A ball is an example of which 3D shape?", options: ["Sphere", "Circle", "Cone", "Cuboid"], answer: "Sphere" }, ml: { question: "‡¥í‡¥∞‡µÅ ‡¥™‡¥®‡µç‡¥§‡µç ‡¥è‡¥§‡µç 3D ‡¥∞‡µÇ‡¥™‡¥§‡µç‡¥§‡¥ø‡¥®‡µç ‡¥â‡¥¶‡¥æ‡¥π‡¥∞‡¥£‡¥Æ‡¥æ‡¥£‡µç?", options: ["‡¥ó‡µã‡¥≥‡¥Ç", "‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥Ç", "‡¥ï‡µã‡µ∫", "‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü"], answer: "‡¥ó‡µã‡¥≥‡¥Ç" } },
            { en: { question: "Is every square a rectangle?", options: ["Yes", "No", "Only sometimes", "Never"], answer: "Yes" }, ml: { question: "‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥µ‡µÅ‡¥Ç ‡¥í‡¥∞‡µÅ ‡¥ö‡¥§‡µÅ‡¥∞‡¥Æ‡¥æ‡¥£‡µã?", options: ["‡¥Ö‡¥§‡µÜ", "‡¥Ö‡¥≤‡µç‡¥≤", "‡¥ö‡¥ø‡¥≤‡¥™‡µç‡¥™‡µã‡µæ ‡¥Æ‡¥æ‡¥§‡µç‡¥∞‡¥Ç", "‡¥í‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡¥≤‡µÅ‡¥Æ‡¥≤‡µç‡¥≤"], answer: "‡¥Ö‡¥§‡µÜ" } },
            { en: { question: "Is every rectangle a square?", options: ["Yes", "No", "Only if it's small", "Always"], answer: "No" }, ml: { question: "‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥ö‡¥§‡µÅ‡¥∞‡¥µ‡µÅ‡¥Ç ‡¥í‡¥∞‡µÅ ‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥Æ‡¥æ‡¥£‡µã?", options: ["‡¥Ö‡¥§‡µÜ", "‡¥Ö‡¥≤‡µç‡¥≤", "‡¥ö‡µÜ‡¥±‡µÅ‡¥§‡¥æ‡¥£‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ ‡¥Æ‡¥æ‡¥§‡µç‡¥∞‡¥Ç", "‡¥é‡¥≤‡µç‡¥≤‡¥æ‡¥Ø‡µç‡¥™‡µç‡¥™‡µã‡¥¥‡µÅ‡¥Ç"], answer: "‡¥Ö‡¥≤‡µç‡¥≤" } },
            { en: { question: "Manu used a wool thread to border a square card with sides of 8 cm each. What is the total length of the thread used?", options: ["8 cm", "16 cm", "24 cm", "32 cm"], answer: "32 cm" }, ml: { question: "8 ‡¥∏‡µÜ.‡¥Æ‡µÄ ‡¥µ‡µÄ‡¥§‡¥Ç ‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥≥‡µç‡¥≥ ‡¥í‡¥∞‡µÅ ‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞ ‡¥ï‡¥æ‡µº‡¥°‡¥ø‡¥®‡µç ‡¥ö‡µÅ‡¥±‡µç‡¥±‡µÅ‡¥Ç ‡¥Æ‡¥®‡µÅ ‡¥®‡µÇ‡¥≤‡µç ‡¥í‡¥ü‡µç‡¥ü‡¥ø‡¥ö‡µç‡¥ö‡µÅ. ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ö‡µç‡¥ö ‡¥®‡µÇ‡¥≤‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥Ü‡¥ï‡µÜ ‡¥®‡µÄ‡¥≥‡¥Ç ‡¥é‡¥§‡µç‡¥∞?", options: ["8 ‡¥∏‡µÜ.‡¥Æ‡µÄ", "16 ‡¥∏‡µÜ.‡¥Æ‡µÄ", "24 ‡¥∏‡µÜ.‡¥Æ‡µÄ", "32 ‡¥∏‡µÜ.‡¥Æ‡µÄ"], answer: "32 ‡¥∏‡µÜ.‡¥Æ‡µÄ" } },
            { en: { question: "Which set of side lengths can form a rectangle?", options: ["5, 8, 6, 7", "5, 6, 7, 9", "5, 8, 5, 8", "8, 8, 5, 8"], answer: "5, 8, 5, 8" }, ml: { question: "‡¥è‡¥§‡µç ‡¥Ö‡¥≥‡¥µ‡µÅ‡¥ï‡µæ ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥í‡¥∞‡µÅ ‡¥ö‡¥§‡µÅ‡¥∞‡¥Ç ‡¥®‡¥ø‡µº‡¥Æ‡µç‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥Ç?", options: ["5, 8, 6, 7", "5, 6, 7, 9", "5, 8, 5, 8", "8, 8, 5, 8"], answer: "5, 8, 5, 8" } },
            { en: { question: "Which set of side lengths CANNOT form a square?", options: ["8, 8, 8, 8", "5, 5, 5, 5", "6, 6, 6, 6", "5, 5, 6, 6"], answer: "5, 5, 6, 6" }, ml: { question: "‡¥è‡¥§‡µç ‡¥Ö‡¥≥‡¥µ‡µÅ‡¥ï‡µæ ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥í‡¥∞‡µÅ ‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥Ç ‡¥®‡¥ø‡µº‡¥Æ‡µç‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥ï‡¥¥‡¥ø‡¥Ø‡¥ø‡¥≤‡µç‡¥≤?", options: ["8, 8, 8, 8", "5, 5, 5, 5", "6, 6, 6, 6", "5, 5, 6, 6"], answer: "5, 5, 6, 6" } },
            { en: { question: "What tool is used to measure the length of the sides of a shape?", options: ["Compass", "Protractor", "Scale/Ruler", "Pencil"], answer: "Scale/Ruler" }, ml: { question: "‡¥í‡¥∞‡µÅ ‡¥∞‡µÇ‡¥™‡¥§‡µç‡¥§‡¥ø‡µª‡µç‡¥±‡µÜ ‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥®‡µÄ‡¥≥‡¥Ç ‡¥Ö‡¥≥‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥® ‡¥â‡¥™‡¥ï‡¥∞‡¥£‡¥Ç ‡¥è‡¥§‡¥æ‡¥£‡µç?", options: ["‡¥ï‡µã‡¥Æ‡µç‡¥™‡¥∏‡µç", "‡¥™‡µç‡¥∞‡µä‡¥ü‡µç‡¥∞‡¥æ‡¥ï‡µç‡¥ü‡µº", "‡¥∏‡µç‡¥ï‡µÜ‡¥Ø‡¥ø‡µΩ/‡¥±‡µÇ‡¥≥‡µº", "‡¥™‡µÜ‡µª‡¥∏‡¥ø‡µΩ"], answer: "‡¥∏‡µç‡¥ï‡µÜ‡¥Ø‡¥ø‡µΩ/‡¥±‡µÇ‡¥≥‡µº" } },
            { en: { question: "A square is the 3D name for which shape?", options: ["Pyramid", "Cuboid", "Sphere", "Cone"], answer: "Cuboid" }, ml: { question: "'‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü' ‡¥é‡¥®‡µç‡¥®‡¥§‡µç ‡¥è‡¥§‡µç 3D ‡¥∞‡µÇ‡¥™‡¥§‡µç‡¥§‡¥ø‡µª‡µç‡¥±‡µÜ ‡¥™‡µá‡¥∞‡¥æ‡¥£‡µç?", options: ["‡¥™‡¥ø‡¥∞‡¥Æ‡¥ø‡¥°‡µç", "‡¥ï‡µç‡¥Ø‡µÇ‡¥¨‡µã‡¥Ø‡¥ø‡¥°‡µç", "‡¥ó‡µã‡¥≥‡¥Ç", "‡¥ï‡µã‡µ∫"], answer: "‡¥ï‡µç‡¥Ø‡µÇ‡¥¨‡µã‡¥Ø‡¥ø‡¥°‡µç" } },
            { en: { question: "A dice is a common example of which shape?", options: ["Cuboid (‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü)", "Sphere (‡¥ó‡µã‡¥≥‡¥Ç)", "Cube (‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü)", "Cone (‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥∏‡µç‡¥§‡µÇ‡¥™‡¥ø‡¥ï)"], answer: "Cube (‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü)" }, ml: { question: "‡¥™‡¥ï‡¥ø‡¥ü ‡¥è‡¥§‡µç ‡¥∞‡µÇ‡¥™‡¥§‡µç‡¥§‡¥ø‡¥®‡µç ‡¥â‡¥¶‡¥æ‡¥π‡¥∞‡¥£‡¥Æ‡¥æ‡¥£‡µç?", options: ["‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü", "‡¥ó‡µã‡¥≥‡¥Ç", "‡¥ï‡µç‡¥Ø‡µÇ‡¥¨‡µç (‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü)", "‡¥ï‡µã‡µ∫"], answer: "‡¥ï‡µç‡¥Ø‡µÇ‡¥¨‡µç (‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü)" } },
            { en: { question: "How many shapes are typically in a Tangram set?", options: ["5", "6", "7", "8"], answer: "7" }, ml: { question: "‡¥í‡¥∞‡µÅ ‡¥ü‡¥æ‡µª‡¥ó‡µç‡¥∞‡¥æ‡¥Ç ‡¥∏‡µÜ‡¥±‡µç‡¥±‡¥ø‡µΩ ‡¥∏‡¥æ‡¥ß‡¥æ‡¥∞‡¥£‡¥Ø‡¥æ‡¥Ø‡¥ø ‡¥é‡¥§‡µç‡¥∞ ‡¥∞‡µÇ‡¥™‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥£‡µç‡¥ü‡µç?", options: ["5", "6", "7", "8"], answer: "7" } },
            { en: { question: "In a GeoBoard, what do you use to make shapes?", options: ["String", "Rubber bands", "Pencils", "Chalk"], answer: "Rubber bands" }, ml: { question: "‡¥ú‡¥ø‡¥Ø‡µã‡¥¨‡µã‡µº‡¥°‡¥ø‡µΩ ‡¥∞‡µÇ‡¥™‡¥ô‡µç‡¥ô‡µæ ‡¥â‡¥£‡µç‡¥ü‡¥æ‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥é‡¥®‡µç‡¥§‡µÅ‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ?", options: ["‡¥ö‡¥∞‡¥ü‡µç", "‡¥±‡¥¨‡µç‡¥¨‡µº ‡¥¨‡¥æ‡µª‡¥°‡µÅ‡¥ï‡µæ", "‡¥™‡µÜ‡µª‡¥∏‡¥ø‡¥≤‡µÅ‡¥ï‡µæ", "‡¥ö‡µã‡¥ï‡µç‡¥ï‡µç"], answer: "‡¥±‡¥¨‡µç‡¥¨‡µº ‡¥¨‡¥æ‡µª‡¥°‡µÅ‡¥ï‡µæ" } },
            { en: { question: "Which shape has no straight sides and no corners?", options: ["Triangle", "Square", "Circle", "Rectangle"], answer: "Circle" }, ml: { question: "‡¥®‡µá‡¥∞‡µÜ‡¥Ø‡µÅ‡¥≥‡µç‡¥≥ ‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µã ‡¥ï‡µã‡¥£‡µÅ‡¥ï‡¥≥‡µã ‡¥á‡¥≤‡µç‡¥≤‡¥æ‡¥§‡µç‡¥§ ‡¥∞‡µÇ‡¥™‡¥Ç ‡¥è‡¥§‡¥æ‡¥£‡µç?", options: ["‡¥§‡µç‡¥∞‡¥ø‡¥ï‡µã‡¥£‡¥Ç", "‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥Ç", "‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥Ç", "‡¥ö‡¥§‡µÅ‡¥∞‡¥Ç"], answer: "‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥Ç" } },
            { en: { question: "A book or a brick is usually in the shape of a...", options: ["Cube", "Sphere", "Cone", "Cuboid"], answer: "Cuboid" }, ml: { question: "‡¥í‡¥∞‡µÅ ‡¥™‡µÅ‡¥∏‡µç‡¥§‡¥ï‡¥Ç ‡¥Ö‡¥≤‡µç‡¥≤‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ ‡¥á‡¥∑‡µç‡¥ü‡¥ø‡¥ï ‡¥∏‡¥æ‡¥ß‡¥æ‡¥∞‡¥£‡¥Ø‡¥æ‡¥Ø‡¥ø ‡¥è‡¥§‡µç ‡¥Ü‡¥ï‡µÉ‡¥§‡¥ø‡¥Ø‡¥ø‡¥≤‡¥æ‡¥£‡µç?", options: ["‡¥ï‡µç‡¥Ø‡µÇ‡¥¨‡µç", "‡¥ó‡µã‡¥≥‡¥Ç", "‡¥ï‡µã‡µ∫", "‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü"], answer: "‡¥ö‡¥§‡µÅ‡¥∞‡¥ï‡µç‡¥ï‡¥ü‡µç‡¥ü" } },
            { en: { question: "If a rectangle has one side of 5 cm and another side of 10 cm, what are the lengths of the other two sides?", options: ["10 cm, 10 cm", "5 cm, 5 cm", "5 cm, 10 cm", "Cannot be determined"], answer: "5 cm, 10 cm" }, ml: { question: "‡¥í‡¥∞‡µÅ ‡¥ö‡¥§‡µÅ‡¥∞‡¥§‡µç‡¥§‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥í‡¥∞‡µÅ ‡¥µ‡¥∂‡¥Ç 5 ‡¥∏‡µÜ.‡¥Æ‡µÄ, ‡¥Æ‡¥±‡µç‡¥±‡µá ‡¥µ‡¥∂‡¥Ç 10 ‡¥∏‡µÜ.‡¥Æ‡µÄ ‡¥Ü‡¥Ø‡¥æ‡µΩ, ‡¥Æ‡¥±‡µç‡¥±‡µç ‡¥∞‡¥£‡µç‡¥ü‡µç ‡¥µ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥®‡µÄ‡¥≥‡¥Ç ‡¥é‡¥§‡µç‡¥∞?", options: ["10 ‡¥∏‡µÜ.‡¥Æ‡µÄ, 10 ‡¥∏‡µÜ.‡¥Æ‡µÄ", "5 ‡¥∏‡µÜ.‡¥Æ‡µÄ, 5 ‡¥∏‡µÜ.‡¥Æ‡µÄ", "5 ‡¥∏‡µÜ.‡¥Æ‡µÄ, 10 ‡¥∏‡µÜ.‡¥Æ‡µÄ", "‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥æ‡µª ‡¥ï‡¥¥‡¥ø‡¥Ø‡¥ø‡¥≤‡µç‡¥≤"], answer: "5 ‡¥∏‡µÜ.‡¥Æ‡µÄ, 10 ‡¥∏‡µÜ.‡¥Æ‡µÄ" } },
            { en: { question: "The butterfly drawing in the book was made of which shapes?", options: ["Only circles", "Only squares", "Circles, squares, and triangles", "Only rectangles"], answer: "Circles, squares, and triangles" }, ml: { question: "‡¥™‡µÅ‡¥∏‡µç‡¥§‡¥ï‡¥§‡µç‡¥§‡¥ø‡¥≤‡µÜ ‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥∂‡¥≤‡¥≠‡¥Ç ‡¥è‡¥§‡µä‡¥ï‡µç‡¥ï‡µÜ ‡¥∞‡µÇ‡¥™‡¥ô‡µç‡¥ô‡µæ ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ö‡µç‡¥ö‡¥æ‡¥£‡µç ‡¥®‡¥ø‡µº‡¥Æ‡µç‡¥Æ‡¥ø‡¥ö‡µç‡¥ö‡¥§‡µç?", options: ["‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥ô‡µç‡¥ô‡µæ ‡¥Æ‡¥æ‡¥§‡µç‡¥∞‡¥Ç", "‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥ô‡µç‡¥ô‡µæ ‡¥Æ‡¥æ‡¥§‡µç‡¥∞‡¥Ç", "‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥ô‡µç‡¥ô‡µæ, ‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥ô‡µç‡¥ô‡µæ, ‡¥§‡µç‡¥∞‡¥ø‡¥ï‡µã‡¥£‡¥ô‡µç‡¥ô‡µæ", "‡¥ö‡¥§‡µÅ‡¥∞‡¥ô‡µç‡¥ô‡µæ ‡¥Æ‡¥æ‡¥§‡µç‡¥∞‡¥Ç"], answer: "‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥ô‡µç‡¥ô‡µæ, ‡¥∏‡¥Æ‡¥ö‡¥§‡µÅ‡¥∞‡¥ô‡µç‡¥ô‡µæ, ‡¥§‡µç‡¥∞‡¥ø‡¥ï‡µã‡¥£‡¥ô‡µç‡¥ô‡µæ" } },
            { en: { question: "In the book, Athul and Binsa made shapes with sticks of 5 cm and 8 cm. Whose shape was a proper rectangle?", options: ["Athul's", "Binsa's", "Both", "Neither"], answer: "Athul's" }, ml: { question: "‡¥™‡µÅ‡¥∏‡µç‡¥§‡¥ï‡¥§‡µç‡¥§‡¥ø‡µΩ, ‡¥Ö‡¥§‡µÅ‡¥≤‡µÅ‡¥Ç ‡¥¨‡¥ø‡µª‡¥∏‡¥Ø‡µÅ‡¥Ç 5 ‡¥∏‡µÜ.‡¥Æ‡µÄ, 8 ‡¥∏‡µÜ.‡¥Æ‡µÄ ‡¥Ö‡¥≥‡¥µ‡µÅ‡¥ï‡¥≥‡µÅ‡¥≥‡µç‡¥≥ ‡¥à‡µº‡¥ï‡µç‡¥ï‡¥ø‡¥≤‡µÅ‡¥ï‡µæ ‡¥ï‡µä‡¥£‡µç‡¥ü‡µç ‡¥∞‡µÇ‡¥™‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥£‡µç‡¥ü‡¥æ‡¥ï‡µç‡¥ï‡¥ø. ‡¥Ü‡¥∞‡µÅ‡¥ü‡µÜ ‡¥∞‡µÇ‡¥™‡¥Æ‡¥æ‡¥£‡µç ‡¥∂‡¥∞‡¥ø‡¥Ø‡¥æ‡¥Ø ‡¥ö‡¥§‡µÅ‡¥∞‡¥Æ‡¥æ‡¥Ø‡¥§‡µç?", options: ["‡¥Ö‡¥§‡µÅ‡¥≤‡¥ø‡¥®‡µç‡¥±‡µÜ", "‡¥¨‡¥ø‡µª‡¥∏‡¥Ø‡µÅ‡¥ü‡µÜ", "‡¥∞‡¥£‡µç‡¥ü‡µÅ‡¥™‡µá‡¥∞‡µÅ‡¥ü‡µá‡¥§‡µÅ‡¥Ç", "‡¥í‡¥∞‡¥æ‡¥≥‡µÅ‡¥ü‡µá‡¥§‡µÅ‡¥Æ‡¥≤‡µç‡¥≤"], answer: "‡¥Ö‡¥§‡µÅ‡¥≤‡¥ø‡¥®‡µç‡¥±‡µÜ" } },
            { en: { question: "What is the main topic of this chapter?", options: ["Numbers", "Addition", "Shapes and Lines", "Time"], answer: "Shapes and Lines" }, ml: { question: "‡¥à ‡¥Ö‡¥ß‡µç‡¥Ø‡¥æ‡¥Ø‡¥§‡µç‡¥§‡¥ø‡¥≤‡µÜ ‡¥™‡µç‡¥∞‡¥ß‡¥æ‡¥® ‡¥µ‡¥ø‡¥∑‡¥Ø‡¥Ç ‡¥é‡¥®‡µç‡¥§‡¥æ‡¥£‡µç?", options: ["‡¥∏‡¥Ç‡¥ñ‡µç‡¥Ø‡¥ï‡µæ", "‡¥∏‡¥ô‡µç‡¥ï‡¥≤‡¥®‡¥Ç", "‡¥µ‡¥∞‡¥ï‡¥≥‡µÅ‡¥Ç ‡¥∞‡µÇ‡¥™‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç", "‡¥∏‡¥Æ‡¥Ø‡¥Ç"], answer: "‡¥µ‡¥∞‡¥ï‡¥≥‡µÅ‡¥Ç ‡¥∞‡µÇ‡¥™‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç" } }
        ];

        // --- Quiz State ---
        let currentLanguage = 'en';
        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let score = 0;
        let soundsReady = false;

        // --- Sound Effects using Tone.js ---
        let correctSound, wrongSound;

        function setupSounds() {
            if (soundsReady) return;
            Tone.start(); 
            correctSound = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 0.2 } }).toDestination();
            wrongSound = new Tone.Synth({ oscillator: { type: 'square' }, envelope: { attack: 0.01, decay: 0.3, sustain: 0, release: 0.2 } }).toDestination();
            soundsReady = true;
        }
        
        // --- Event Listeners ---
        startQuizBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', nextQuestion);
        backBtn.addEventListener('click', prevQuestion);
        submitBtn.addEventListener('click', showReview);
        restartQuizBtn.addEventListener('click', () => {
             currentQuestionIndex = 0;
             userAnswers.fill(null);
             score = 0;
             reviewScreen.classList.add('hidden');
             welcomeScreen.classList.remove('hidden');
             startQuizBtn.classList.add('hidden');
             languageSelection.classList.remove('hidden');
        });

        // --- Functions ---
        function setLanguage(lang) {
            currentLanguage = lang;
            const text = uiText[currentLanguage];
            welcomeTitle.textContent = text.welcomeTitle;
            welcomeSubtitle.textContent = text.welcomeSubtitle;
            startQuizBtn.textContent = text.startBtn;
            
            languageSelection.classList.add('hidden');
            startQuizBtn.classList.remove('hidden');
        }

        function updateUiText() {
            const text = uiText[currentLanguage];
            questionLabel.textContent = text.questionLabel;
            ofLabel.textContent = text.ofLabel;
            backBtn.textContent = text.backBtn;
            nextBtn.textContent = text.nextBtn;
            submitBtn.textContent = text.submitBtn;
            reviewTitle.textContent = text.reviewTitle;
            reviewSubtitle.textContent = text.reviewSubtitle;
            restartQuizBtn.textContent = text.playAgainBtn;
        }

        function startQuiz() {
            setupSounds();
            updateUiText();
            welcomeScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            totalQuestionsEl.textContent = quizData.length;
            loadQuestion();
        }

        function loadQuestion() {
            feedbackMessage.textContent = '';
            optionsContainer.innerHTML = '';
            
            const questionData = quizData[currentQuestionIndex][currentLanguage];
            
            questionNumberEl.textContent = currentQuestionIndex + 1;
            questionTextEl.textContent = questionData.question;
            progressBar.style.width = `${((currentQuestionIndex + 1) / quizData.length) * 100}%`;

            questionData.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = 'w-full text-left p-4 btn option-btn bg-white hover:bg-green-100 rounded-lg shadow-sm border-2 border-stone-200';
                button.onclick = () => selectOption(button, option);
                optionsContainer.appendChild(button);

                if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selected === option) {
                    button.classList.add('selected');
                }
            });

            updateNavigation();
        }

        function selectOption(button, selectedOption) {
            const buttons = optionsContainer.querySelectorAll('button');
            buttons.forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            
            const correctAnswer = quizData[currentQuestionIndex][currentLanguage].answer;
            userAnswers[currentQuestionIndex] = { selected: selectedOption, correct: correctAnswer };

            const isCorrect = selectedOption === correctAnswer;
            if (isCorrect) {
                if (soundsReady) correctSound.triggerAttackRelease('C5', '0.2s');
                feedbackMessage.textContent = uiText[currentLanguage].correctFeedback;
                feedbackMessage.className = 'mt-4 text-center font-bold text-green-600';
            } else {
                if (soundsReady) wrongSound.triggerAttackRelease('C3', '0.3s');
                const text = uiText[currentLanguage];
                feedbackMessage.textContent = `${text.correctAnswer} ${correctAnswer}`;
                feedbackMessage.className = 'mt-4 text-center font-bold text-rose-600';
            }
        }

        function updateNavigation() {
            backBtn.disabled = currentQuestionIndex === 0;
            backBtn.classList.toggle('opacity-50', currentQuestionIndex === 0);

            if (currentQuestionIndex === quizData.length - 1) {
                nextBtn.classList.add('hidden');
                submitBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.remove('hidden');
                submitBtn.classList.add('hidden');
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function showReview() {
            quizScreen.classList.add('hidden');
            reviewScreen.classList.remove('hidden');

            score = 0;
            userAnswers.forEach((answer) => {
                if (answer && answer.selected === answer.correct) {
                    score++;
                }
            });

            finalScoreEl.textContent = `${score}/${quizData.length}`;

            const text = uiText[currentLanguage];
            reviewContent.innerHTML = `<h3 class="text-2xl font-bold text-center mb-4 text-stone-700">${text.reviewHeader}</h3>`;
            quizData.forEach((question, index) => {
                const questionData = question[currentLanguage];
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer && userAnswer.selected === userAnswer.correct;
                
                const reviewItem = document.createElement('div');
                reviewItem.className = `p-4 rounded-lg shadow-sm ${isCorrect ? 'bg-green-100' : 'bg-rose-100'}`;
                
                reviewItem.innerHTML = `
                    <p class="font-bold text-stone-800">${index + 1}. ${questionData.question}</p>
                    <p class="mt-2 text-sm ${isCorrect ? 'text-green-800' : 'text-rose-800'}">
                        ${text.yourAnswer} <span class="font-semibold">${userAnswer ? userAnswer.selected : text.notAnswered}</span>
                        ${!isCorrect ? `<br>${text.correctAnswer} <span class="font-semibold">${userAnswer.correct}</span>` : '‚úÖ'}
                    </p>
                `;
                reviewContent.appendChild(reviewItem);
            });
        }

    </script>
</body>
</html>

