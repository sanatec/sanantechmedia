const questions = [
 {
        question: " لفظ  ' گٹھائیں ' کا   ہم آواز چن لیجیے۔ ",
        options: ["لاؤ", "پڑھائیں", " جاؤ", " لکھیں"],
        correct: 1,
      },
{
        question: "زلیخا حسین سے تعلق ہے ؟ ",
        options: ["ناول نگاری", " غزل خوانی", " شاعری", " ڈراما نگاری"],
        correct: 0,
      },
{
        question: "علی گڈھ مسلم یونیویرسیٹی آف کامبس کیرلا کے کس  ضلع میں واقع ہے؟ ",
        options: ["ملاپرم", " کالی کٹ", " پالاکاڈ", " کنّور"],
        correct: 0,
      },
{
        question: "کان پکڑ کر ناک    پہ         بیٹھے ناک           چڑھی                کہلائے.وگ اسے آنکھوں پہ بٹھائیں تب وہ شان دکھائے ",
        options: ["آئینہ", " عینک", "قلم", "ٹوپی"],
        correct: 1,
      },
{
        question: "وہ کون سا  جانور ہےجو زبان سے اپنے کان صاف کرتا ہے ؟ ",
        options: ["ہاتھی", " زرافہ", "بلیّ", "خرگوش"],
        correct: 1,
      },
{
        question: " لب پہ آتی ہے دعا بن کے تمنّا میری۔شعرکا شاعر کون ہے ؟",
        options: ["الطاف حسین حالی", " علامہ محمد اقبال", "مرزا غالب", "اسد اللہ خان غالب"],
        correct: 1,
      },
{
        question: "مذہب  نہیں سکھاتا   آپس   میں بیر رکھنا۔شعرکا شاعر کون ہے ؟ ",
        options: ["علامہ محمد اقبال", " میر تقی میر", "الطاف حسین حالی", "جگر مرادآبادی"],
        correct: 0,
      },
{
        question: " پانی سے چلنے والی گاڑی نہیں ہے ۔ ",
        options: ["کشتی", "ناؤ", "گھوڑا گاڑی", "جہاز"],
        correct: 2,
      },
{
        question: "چار پہیوں والی گاڑی کا نام چن لیجیے۔ ",
        options: ["سائکل", "بس", "کار", "رکشا"],
        correct: 2,
      },
{
        question: "کیرلا کے کس ضلع میں مٹرو ریل ہیں ؟ ",
        options: ["آلا پژا", " ایرناکلم", "ترشور", "تروننتا پورم"],
        correct: 1,
      },
{
        question: "مشہور تفریحی مقام  ' ملامپژا ' کس ضلع میں  ہے ؟ ",
        options: [" ملاپرم ", "پالاکاڈ", "ترشور", "کنّور"],
        correct: 1,
      },
{
        question: "مشہور تفریحی مقام  ' بیکل قلعہ  ' کس ضلع میں  ہے ؟ ",
        options: ["کالی کٹ", " ملاپرم", "ویناڈ", " کاسر گوڈ"],
        correct: 3,
      },
{
        question: "ٹرافک پر لال  سگنل ملا تو کیا کرنا ہے؟ ",
        options: ["گاڑی دائیں طرف موڈنا ہے۔", " گاڑی رکنا ہے۔", "گاڑی چلنا ہے۔", "ان میں سے کوئی نہیں"],
        correct: 1,
      },
{
        question: "سڑک کے کس طرف سے  پیدل چلنا ہے ؟ ",
        options: ["سڑک کے  دائیں طرف سے  چلنا ہے ۔", "سڑک کے بائیں  طرف سے  چلنا ہے ۔", "سڑک کے   درمیاں سے  سے  چلنا ہے ۔", "ان میں سے کوئی نہیں۔"],
        correct: 0,
      },
{
        question: "سڑک کے کس طرف سے  گاڑی  چلانا ہے ؟ ",
        options: ["سڑک کے  دائیں طرف سے  چلانا ہے ۔", "سڑک کے بائیں  طرف سے  چلانا ہے ۔", "سڑک کے   درمیاں سے  سے  چلانا ہے ۔", "ان میں سے کوئی نہیں۔"],
        correct: 1,
      },
{
        question: "سڑک کے قانون سے متعلقہ  صحیح جملہ چن لیجیے۔ ",
        options: ["سڑک کے ہرا سگنل گاڑی رکنے کا ہے۔", "سڑک کے ہرا سگنل گاڑی چلنے کا ہے۔", "سڑک کے لال سگنل گاڑی چلنے کا ہے۔", " سڑک کے پیلا سگنل گاڑی چلنے کا ہے۔"],
        correct: 1,
      },
{
        question: "' متّنگا ' جنگل   کس ضلع میں ہے؟ ",
        options: ["ملاپرم  ", " ویناڈ", "کاسرگوڈ", "ترشور"],
        correct: 1,
      },
{
        question: "  میسور پیلیس  کس نے بنوایا ہے ؟",
        options: ["کرشن راجیندر واڈیار", " ٹیپو سلطان", "شاہ جہاں ", "کرشن دیورایر "],
        correct: 0,
      },
{
        question: "ٹیپو سلطان کا مزار کہاں واقع ہیں ؟ ",
        options: ["چینّائی پٹنم", "سری رنگا پٹنم", "کولم پٹنم", "مینگلور پٹنم"],
        correct: 1,
      },
{
        question: " مشہور تفریحی مقام ' اووٹی ' کس ریاست میں ہے؟",
        options: ["کیرلا", " تمل ناڈو", "کرناٹک", "تلینگانا"],
        correct: 1,
      },
{
        question: "' راج گھاٹ  ' سے  تعلق ہے ؟ ",
        options: ["جواہر لال نہرو", "مولانا ابوالکلام  ازاد", "موہن داس کرم چند گاندھی", "ان میں سے کوئی نہیں "],
        correct: 2,
      },
{
        question: " ہندوستان کی راجدھانی ہے ؟ ",
        options: ["میسور ", "کولکتا", "دہلی ", "کاشمیر"],
        correct: 2,
      },
{
        question: "  سنائیں  کے مناسب ہم آواز لفظ چن لیجیے۔ ",
        options: ["لائی", "کہلائے", "جائے", "بتائیں"],
        correct: 3,
      },
{
        question: "بچوں کا رسالہ کونسا ہے؟  ",
        options: ["اعتماد", "منصف", "بچوں کی دنیا", "سیاست"],
        correct: 2,
      },
{
        question: " موجودہ کیرلا گورنر کون ہے؟ ",
        options: ["عارف محمد خان", "راجیندر وشوناتھ ارلیکر", "دروپتی مرمو", "نریندر مودی"],
        correct: 1,
      },
   
];

let currentQuestion = 0;
let correctAnswers = 0;
let userAnswers = new Array(questions.length).fill(-1); // Track user selections

const correctSound = document.getElementById("correct-sound");
const incorrectSound = document.getElementById("incorrect-sound");
const backButton = document.getElementById("back");
const nextButton = document.getElementById("next");

function loadQuestion() {
    const questionElement = document.getElementById("question");
    const optionsContainer = document.getElementById("options");

    questionElement.textContent = questions[currentQuestion].question;
    optionsContainer.innerHTML = "";

    questions[currentQuestion].options.forEach((option, index) => {
        const button = document.createElement("button");
        button.textContent = option;
        button.onclick = () => checkAnswer(index, button);
        optionsContainer.appendChild(button);

        // If already answered, highlight accordingly
        if (userAnswers[currentQuestion] !== -1) {
            button.disabled = true;
            if (index === questions[currentQuestion].correct) {
                button.classList.add("correct");
            }
            if (index === userAnswers[currentQuestion] && index !== questions[currentQuestion].correct) {
                button.classList.add("wrong");
            }
        }
    });

    // Update navigation buttons
    backButton.disabled = currentQuestion === 0;
    nextButton.disabled = userAnswers[currentQuestion] === -1 && currentQuestion < questions.length - 1;
    if (currentQuestion === questions.length - 1 && userAnswers[currentQuestion] !== -1) {
        nextButton.textContent = "Finish";
    } else {
        nextButton.textContent = "Next";
    }
}

function checkAnswer(selectedIndex, selectedButton) {
    if (userAnswers[currentQuestion] !== -1) return; // Already answered

    const correctIndex = questions[currentQuestion].correct;
    const buttons = document.querySelectorAll(".options button");

    userAnswers[currentQuestion] = selectedIndex;

    // Highlight correct answer always
    buttons[correctIndex].classList.add("correct");

    if (selectedIndex === correctIndex) {
        correctAnswers++;
        document.getElementById("score").textContent = correctAnswers;
        correctSound.play();
        showConfetti();
    } else {
        selectedButton.classList.add("wrong");
        incorrectSound.play();
    }

    // Disable all buttons
    buttons.forEach((button) => (button.disabled = true));

    // Enable next button
    nextButton.disabled = false;
}

function showConfetti() {
    const colors = ['#f00', '#0f0', '#00f', '#ff0', '#f0f', '#0ff'];
    for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
        confetti.style.opacity = Math.random() + 0.5;
        document.body.appendChild(confetti);

        setTimeout(() => {
            confetti.remove();
        }, 3000);
    }
}

backButton.onclick = () => {
    if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion();
    }
};

nextButton.onclick = () => {
    if (userAnswers[currentQuestion] === -1) return; // Not answered yet

    if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion();
    } else {
        showResults();
    }
};

function showResults() {
    const modal = document.getElementById("results-modal");
    const correctBar = document.getElementById("correct-bar");
    const incorrectBar = document.getElementById("incorrect-bar");
    const correctCount = document.getElementById("correct-count");
    const incorrectCount = document.getElementById("incorrect-count");
    const resultsMessage = document.getElementById("results-message");

    const totalQuestions = questions.length;
    const incorrectAnswers = totalQuestions - correctAnswers;

    correctCount.textContent = correctAnswers;
    incorrectCount.textContent = incorrectAnswers;

    correctBar.style.width = `${(correctAnswers / totalQuestions) * 100}%`;
    incorrectBar.style.width = `${(incorrectAnswers / totalQuestions) * 100}%`;

    if (correctAnswers === totalQuestions) {
        resultsMessage.textContent = "Congratulations! You answered all questions correctly!";
    } else {
        resultsMessage.textContent = "Try Again!";
    }

    modal.style.display = "flex";
}

function showReview() {
    const reviewQuestions = document.getElementById("review-questions");
    reviewQuestions.innerHTML = "";

    questions.forEach((q, idx) => {
        const reviewDiv = document.createElement("div");
        reviewDiv.className = "review-question";

        const questionH3 = document.createElement("h3");
        questionH3.textContent = `${idx + 1}. ${q.question}`;
        reviewDiv.appendChild(questionH3);

        const optionsDiv = document.createElement("div");
        optionsDiv.className = "review-options";

        q.options.forEach((option, optIdx) => {
            const button = document.createElement("button");
            button.textContent = option;
            button.disabled = true;

            if (optIdx === q.correct) {
                button.classList.add("correct");
            }
            if (optIdx === userAnswers[idx] && optIdx !== q.correct) {
                button.classList.add("wrong");
            } else if (optIdx === userAnswers[idx]) {
                button.classList.add("correct"); // If correct, already added
            }

            optionsDiv.appendChild(button);
        });

        reviewDiv.appendChild(optionsDiv);
        reviewQuestions.appendChild(reviewDiv);
    });

    document.getElementById("review-modal").style.display = "flex";
}

function closeReview() {
    document.getElementById("review-modal").style.display = "none";
}

function restartQuiz() {
    currentQuestion = 0;
    correctAnswers = 0;
    userAnswers.fill(-1);
    document.getElementById("score").textContent = correctAnswers;
    document.getElementById("results-modal").style.display = "none";
    loadQuestion();
}

// Load the first question
loadQuestion();
