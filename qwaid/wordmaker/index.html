<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>اردو ورڈ میکر گیم</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap');
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Noto Nastaliq Urdu', serif;
      background: linear-gradient(135deg,#f5f7fa 0%, #c3cfe2 100%);
      display:flex;align-items:center;justify-content:center;padding:20px;overflow:hidden;
    }
    .game-container{
      width:100%;max-width:720px;background:#fff;border-radius:20px;padding:20px;
      box-shadow:0 15px 35px rgba(0,0,0,0.15);position:relative;z-index:10;border:3px solid #FFD700;
    }
    header{background:linear-gradient(to right,#FF6B6B,#FF8E53);color:#fff;padding:14px;border-radius:12px;
      font-size:22px;font-weight:700;text-align:center;margin-bottom:14px;}
    .level-selector{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-bottom:12px;}
    .level-btn{padding:8px 12px;border-radius:10px;border:none;cursor:pointer;background:#eee;font-weight:700}
    .level-btn.active{background:#222;color:#fff;box-shadow:0 6px 14px rgba(0,0,0,0.12);transform:scale(1.03)}
    .level-info{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;padding:8px 12px;
      background:linear-gradient(to right,#4ECDC4,#556270);color:#fff;border-radius:10px;font-weight:700}
    .question{font-size:34px;padding:18px;border-radius:14px;background:linear-gradient(to right,#A8FF78,#78FFD6);
      display:inline-block;border:2px solid #38EF7D;color:#333;box-shadow:0 6px 15px rgba(0,0,0,0.08);min-width:180px}
    .options{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:18px}
    .option{padding:14px;border-radius:12px;border:none;font-size:22px;background:linear-gradient(to bottom,#FFEB3B,#FFC107);
      cursor:pointer;font-weight:800;box-shadow:0 6px 14px rgba(0,0,0,0.12);transition:transform .18s}
    .option:active{transform:translateY(3px)}
    .feedback{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:300;
      background:rgba(255,255,255,0.98);padding:18px 28px;border-radius:14px;font-size:30px;font-weight:800;
      color:#E65100;box-shadow:0 15px 35px rgba(0,0,0,0.2);display:none;border:3px solid #FFD700}
    canvas#star-canvas{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:200}
    @media (max-width:480px){
      .question{font-size:26px;padding:12px}
      .option{font-size:18px;padding:12px}
      header{font-size:18px;padding:10px}
      .feedback{font-size:22px;padding:14px 20px}
    }
  </style>
</head>
<body>
  <div class="game-container" role="application" aria-label="Urdu word maker game">
    <header>✨ اردو ورڈ میکر گیم ✨</header>

    <div class="level-selector" id="level-selector">
      <button class="level-btn level1 active" onclick="changeLevel(0)">Level 1</button>
      <button class="level-btn level2" onclick="changeLevel(1)">Level 2</button>
      <button class="level-btn level3" onclick="changeLevel(2)">Level 3</button>
      <button class="level-btn level4" onclick="changeLevel(3)">Level 4</button>
      <button class="level-btn level5" onclick="changeLevel(4)">Level 5</button>
    </div>

    <div class="level-info">
      <div id="level-display">Level 1 - بنیادی حروف</div>
      <div>اسکور: <span id="score">0</span></div>
    </div>

    <div style="display:flex;justify-content:center;">
      <div class="question" id="question">---</div>
    </div>

    <div class="options" id="options" role="list"></div>

    <div class="feedback" id="feedback" role="status" aria-live="polite"></div>
  </div>

  <canvas id="star-canvas" aria-hidden="true"></canvas>

  <script>
    // ---------- Fireworks (star) ----------
    const canvas = document.getElementById('star-canvas');
    const ctx = canvas.getContext('2d');

    function resizeCanvas(){
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function launchFireworks() {
      const particles = [];
      const colors = ["#FFD700", "#FFEE58", "#FFF176", "#FFAB00", "#FF6F00"];

      for (let i = 0; i < 60; i++) {
        const angle = Math.random() * Math.PI * 2;
        const speed = Math.random() * 6 + 3;
        particles.push({
          x: canvas.width / 2,
          y: canvas.height / 2,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed - 2,
          size: Math.random() * 4 + 2,
          color: colors[Math.floor(Math.random() * colors.length)],
          life: 100
        });
      }

      function drawStar(x, y, size, color) {
        ctx.save();
        ctx.beginPath();
        ctx.translate(x, y);
        ctx.moveTo(0, -size);
        for (let i = 0; i < 5; i++) {
          ctx.rotate(Math.PI / 5);
          ctx.lineTo(0, -size * 0.5);
          ctx.rotate(Math.PI / 5);
          ctx.lineTo(0, -size);
        }
        ctx.closePath();
        ctx.fillStyle = color;
        ctx.shadowColor = color;
        ctx.shadowBlur = 15;
        ctx.fill();
        ctx.restore();
      }

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach((p, i) => {
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.05; // gravity
          p.life--;
          if (p.life > 0) {
            drawStar(p.x, p.y, p.size, p.color);
          } else {
            particles.splice(i, 1);
          }
        });
        if (particles.length > 0) {
          requestAnimationFrame(animate);
        } else {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
      }
      animate();
    }

    // ---------- Levels data (your provided full set) ----------
    const levels = [
      {
        name: "Level 1 - بنیادی حروف",
        puzzles: [
          { q: "ک + ا = ؟", answer: "کا", choices: ["کی","کا","کو","کہ"], audio: "ka.wav" },
          { q: "ب + ی = ؟", answer: "بی", choices: ["بو","بی","با","بے"], audio: "bi.wav" },
          { q: "ت + و = ؟", answer: "تو", choices: ["تی","تا","تو","تہ"], audio: "to.wav" },
          { q: "ا + ا = ؟", answer: "آ", choices:  ["آ","او","ای","ئے"], audio: "aa.wav" },
          { q: "ک + ے = ؟", answer: "کے", choices: ["کے","کو","کی","کا"], audio: "ke.wav" },
          { q: "ر + ا = ؟", answer: "را", choices: ["رے","رو","ری","را"], audio: "ra.wav" },
          { q: "پ + ا = ؟", answer: "پا", choices: ["پے","پو","پی","پا"], audio: "pa.wav" },
          { q: "پ + ی = ؟", answer: "پی", choices: ["پے","پو","پی","پا"], audio: "pi.wav" },
          { q: "پ + و = ؟", answer: "پو", choices: ["پے","پو","پی","پا"], audio: "po.wav" },
          { q: "پ + ے = ؟", answer: "پے", choices: ["پے","پو","پی","پا"], audio: "pe.wav" },
          { q: "ٹ + ا = ؟", answer: "ٹا", choices: ["ٹے","ٹو","ٹی","ٹا"], audio: "ta.wav" },
          { q: "ٹ + ی = ؟", answer: "ٹی", choices: ["ٹے","ٹو","ٹی","ٹا"], audio: "ti.wav" },
          { q: "ٹ + و = ؟", answer: "ٹو", choices: ["ٹے","ٹو","ٹی","ٹا"], audio: "tto.wav" },
          { q: "ٹ + ے = ؟", answer: "ٹے", choices: ["ٹے","ٹو","ٹی","ٹا"], audio: "te.wav" },
          { q: "چ + ا = ؟", answer: "چا", choices: ["چے","چو","چی","چا"], audio: "cha.wav" },
          { q: "چ + ی = ؟", answer: "چی", choices: ["چے","چو","چی","چا"], audio: "chi.wav" },
          { q: "چ + و = ؟", answer: "چو", choices: ["چے","چو","چی","چا"], audio: "chu.wav" },
          { q: "چ + ے = ؟", answer: "چے", choices: ["چے","چو","چی","چا"], audio: "che.wav" },
          { q: "س + ا = ؟", answer: "سا", choices: ["سے","سو","سی","سا"], audio: "sa.wav" },
          { q: "س + ی = ؟", answer: "سی", choices: ["سے","سو","سی","سا"], audio: "si.wav" },
          { q: "س + و = ؟", answer: "سو", choices: ["سے","سو","سی","سا"], audio: "su.wav" },
          { q: "س + ے = ؟", answer: "سے", choices: ["سے","سو","سی","سا"], audio: "se.wav" },
          { q: "ل + ا = ؟", answer: "لا", choices:  ["لے","لو","لی","لا"], audio: "la.wav" },
          { q: "ل + ی = ؟", answer: "لی", choices: ["لے","لو","لی","لا"], audio: "li.wav" },
          { q: "ل + و = ؟", answer: "لو", choices: ["لے","لو","لی","لا"], audio: "lu.wav" },
          { q: "ل + ے = ؟", answer: "لے", choices: ["لے","لو","لی","لا"], audio: "le.wav" },
          { q: "ف + ا = ؟", answer: "فا", choices: ["فے","فو","فی","فا"], audio: "fa.wav" },
          { q: "ف + ی = ؟", answer: "فی", choices: ["فے","فو","فی","فا"], audio: "fi.wav" },
          { q: "ف + و = ؟", answer: "فو", choices: ["فے","فو","فی","فا"], audio: "fu.wav" },
          { q: "ف + ے = ؟", answer: "فے", choices: ["فے","فو","فی","فا"], audio: "fe.wav" },
          { q: "م + ا = ؟", answer: "ما", choices: ["مے","مو","می","ما"], audio: "ma.wav" },
          { q: "م + ی = ؟", answer: "می", choices: ["مے","مو","می","ما"], audio: "mi.wav" },
          { q: "م + و = ؟", answer: "مو", choices: ["مے","مو","می","ما"], audio: "mu.wav" },
          { q: "م + ے = ؟", answer: "مے", choices: ["مے","مو","می","ما"], audio: "me.wav" },
          { q: "گ + و = ؟", answer: "گو", choices: ["گا","گو","گی","گے"], audio: "go.wav" }
        ]
      },
      {
        name: "Level 2 - تین حروف",
        puzzles: [
          { q: "ب + ا + ل = ؟", answer: "بال", choices: ["بال","بار","باز","بام"], audio: "baal.wav" },
          { q: "گ + ھ + ر = ؟", answer: "گھر", choices: ["گھر","گہر","گار","گیر"], audio: "ghar.wav" },
          { q: "ک + ا + م = ؟", answer: "کام", choices: ["کام","کال","کار","کاپ"], audio: "kaam.wav" },
          { q: "پ + ا + ن = ؟", answer: "پان", choices: ["پان","پال","پار","پاک"], audio: "paan.wav" },
          { q: "چ + ا + ر = ؟", answer: "چار", choices: ["چار","چال","چاپ","چاک"], audio: "chaar.wav" },
          { q: "د + و + ر = ؟", answer: "دور", choices: ["دور","دال","دار","داغ"], audio: "door.wav" },
          { q: "ن + ا + م = ؟", answer: "نام", choices: ["نام","نال","نار","ناک"], audio: "naam.wav" },
          { q: "ر + ا + ت = ؟", answer: "رات", choices: ["رات","راز","راہ","رام"], audio: "raat.wav" },
          { q: "د + ا + ل = ؟", answer: "دال", choices: ["دال","دار","دام","داغ"], audio: "daal.wav" },
          { q: "آ + گ = ؟", answer: "آگ", choices: ["آگ","آپ","آم","آج"], audio: "aag.wav" },
          { q: "ب + ا + غ = ؟", answer: "باغ", choices: ["باغ","بار","باز","بام"], audio: "baagh.wav" },
          { q: "م + ا + ں = ؟", answer: "ماں", choices: ["ماں","مان","مال","مار"], audio: "maan.wav" }
        ]
      },
      {
        name: "Level 3 - چار حروف",
        puzzles: [
          { q: "ک + ت + ا + ب = ؟", answer: "کتاب", choices: ["کتاب","کمال","کلام","کمان"], audio: "kitaab.wav" },
          { q: "پ + ا + ن + ی = ؟", answer: "پانی", choices: ["پانی","پالک","پارک","پاکی"], audio: "paani.wav" },
          { q: "آ + د + م + ی = ؟", answer: "آدمی", choices: ["آدمی","آرام","آواز","آنکھ"], audio: "aadmi.wav" },
          { q: "س + ب + ز + ی = ؟", answer: "سبزی", choices: ["سبزی","سردی","سالی","سمجھ"], audio: "sabzi.wav" },
          { q: "م + ک + ا + ن = ؟", answer: "مکان", choices: ["مکان","مہان","ملان","مدان"], audio: "makaan.wav" },
          { q: "د + و + س + ت = ؟", answer: "دوست", choices: ["دوست","درست","دولت","دنیا"], audio: "dost.wav" },
          { q: "پ + ھ + و + ل = ؟", answer: "پھول", choices: ["پھول","پہول","پلول","پکول"], audio: "phool.wav" },
          { q: "چ + ا + ن + د = ؟", answer: "چاند", choices: ["چاند","چالد","چارد","چاکد"], audio: "chaand.wav" },
          { q: "پ + ر + ن + د = ؟", answer: "پرند", choices: ["پرند","پلند","پکند","پہند"], audio: "parind.wav" },
          { q: "س + و + ر + ج = ؟", answer: "سورج", choices: ["سورج","سالج","سارج","سیرج"], audio: "suraj.wav" },
          { q: "م + چ + ھ + ر = ؟", answer: "مچھر", choices: ["مچھر","محھر","ملھر","مکھر"], audio: "machar.wav" },
          { q: "ب + چ + ھ + ا = ؟", answer: "بچھا", choices: ["بچھا","بلھا","بکھا","بہھا"], audio: "bachha.wav" }
        ]
      },
      {
        name: "Level 4 - پانچ حروف",
        puzzles: [
          { q: "ت + ع + ل + ی + م = ؟", answer: "تعلیم", choices: ["تعلیم","تکلیم","تسلیم","تحلیم"], audio: "taleem.wav" },
          { q: "م + ب + ا + ر + ک = ؟", answer: "مبارک", choices: ["مبارک","مابرک","مبراک","مباکر"], audio: "mohabbat.wav" },
          { q: "ا + ن + س + ا + ن = ؟", answer: "انسان", choices: ["انسان","اہسان","امسان","الشان"], audio: "insaan.wav" },
          { q: "م + د + ر + س + ہ = ؟", answer: "مدرسہ", choices: ["مدرسہ","مہرسہ","ملرسہ","مررسہ"], audio: "madrasa.wav" },
          { q: "خ + و + ش + ی = ؟", answer: "خوشی", choices: ["خوشی","خرشی","خیشی","خاشی"], audio: "khushi.wav" },
          { q: "م + ش + ک + ل = ؟", answer: "مشکل", choices: ["مشکل","مہکل","ملکل","مرکل"], audio: "mushkil.wav" },
          { q: "ت + ا + ر + ی + خ = ؟", answer: "تاریخ", choices: ["تاریخ","تہریخ","تیریخ","تاھیخ"], audio: "tareekh.wav" },
          { q: "م + ق + ا + ل + ہ = ؟", answer: "مقالہ", choices: ["مقالہ","مہالہ","میالہ","مرالہ"], audio: "maqala.wav" },
          { q: "ح + ا + ل + ا + ت = ؟", answer: "حالات", choices: ["حالات","ہالات","خالات","جالات"], audio: "haalaat.wav" },
          { q: "م + س + ا + ئ + ل = ؟", answer: "مسائل", choices: ["مسائل","مہائل","میائل","مرائل"], audio: "masail.wav" }
        ]
      },
      {
        name: "Level 5 - چھ حروف",
        puzzles: [
          { q: "ت + ر + ب + ی + ت = ؟", answer: "تربیت", choices: ["تربیت","ترہیت","تریبت","تربیہ"], audio: "tarbiyat.wav" },
          { q: "م + خ + ص + و + ص = ؟", answer: "مخصوص", choices: ["مخصوص","محصوص","ملصوص","مرصوص"], audio: "makhsoos.wav" },
          { q: "ح + ک + و + م + ت = ؟", answer: "حکومت", choices: ["حکومت","حہومت","حلومت","حرومت"], audio: "hukumat.wav" },
          { q: "ت + ج + ر + ب + ہ = ؟", answer: "تجربہ", choices: ["تجربہ","تہربہ","تلربہ","ترربہ"], audio: "tajurba.wav" },
          { q: "م + ع + ا + ش + ر + ہ = ؟", answer: "معاشرہ", choices: ["معاشرہ","مہاشرہ","میاشرہ","مراشرہ"], audio: "muashira.wav" },
          { q: "ا + ح + ت + ر + ا + م = ؟", answer: "احترام", choices: ["احترام","اہترام","ایترام","ارترام"], audio: "ehtram.wav" },
          { q: "م + ق + ص + د + ی + ت = ؟", answer: "مقصدیت", choices: ["مقصدیت","مہصدیت","ملصدیت","مرصدیت"], audio: "maqsadiyat.wav" },
          { q: "آ + ز + ا + د + ی = ؟", answer: "آزادی", choices: ["آزادی","آہادی","آلادی","آرادی"], audio: "azaadi.wav" },
          { q: "م + ہ + ر + ب + ا + ن = ؟", answer: "مہربان", choices: ["مہربان","محربان","ملربان","مرربان"], audio: "mehrbaan.wav" },
          { q: "ا + ن + ت + ظ + ا + ر = ؟", answer: "انتظار", choices: ["انتظار","اہتظار","ایتظار","ارتظار"], audio: "intezaar.wav" }
        ]
      }
    ];

    // ---------- Game state ----------
    let currentLevel = 0;
    let currentPuzzle = 0;
    let score = 0;

    // ---------- UI helpers ----------
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const feedbackEl = document.getElementById('feedback');
    const levelDisplayEl = document.getElementById('level-display');
    const scoreEl = document.getElementById('score');

    function updateLevelButtons() {
      document.querySelectorAll('.level-btn').forEach((btn, idx) => {
        if (idx === currentLevel) btn.classList.add('active'); else btn.classList.remove('active');
      });
    }

    function changeLevel(levelIndex) {
      currentLevel = levelIndex;
      currentPuzzle = 0;
      updateLevelButtons();
      loadPuzzle();
      updateDisplay();
    }

    function updateDisplay() {
      levelDisplayEl.innerText = levels[currentLevel].name;
      scoreEl.innerText = score;
    }

    function loadPuzzle() {
      feedbackEl.style.display = 'none';
      const level = levels[currentLevel];
      if (!level || level.puzzles.length === 0) {
        questionEl.innerText = 'کوئی پزل موجود نہیں';
        optionsEl.innerHTML = '';
        return;
      }
      // ensure currentPuzzle within bounds
      if (currentPuzzle >= level.puzzles.length) currentPuzzle = 0;
      const puzzle = level.puzzles[currentPuzzle];
      questionEl.innerText = puzzle.q || '---';
      optionsEl.innerHTML = '';

      // shuffle choices
      const shuffled = [...puzzle.choices].sort(() => Math.random() - 0.5);
      shuffled.forEach(choice => {
        const btn = document.createElement('button');
        btn.className = 'option';
        btn.innerText = choice;
        btn.setAttribute('role','listitem');
        btn.onclick = () => checkAnswer(choice);
        optionsEl.appendChild(btn);
      });
    }

    function checkAnswer(choice) {
      const puzzle = levels[currentLevel].puzzles[currentPuzzle];
      if (!puzzle) return;
      if (choice === puzzle.answer) {
        // correct: update score, play audio (if file exists), launch fireworks, advance puzzle
        score += (currentLevel + 1) * 20;
        updateDisplay();

        // play audio if provided (silently fail if not found)
        if (puzzle.audio) {
          try {
            const audio = new Audio(puzzle.audio);
            audio.play().catch(()=>{});
          } catch (e) {}
        }

        // launch fireworks only (no feedback message)
        launchFireworks();

        // short pause so fireworks visible, then next puzzle
        setTimeout(() => {
          currentPuzzle++;
          if (currentPuzzle >= levels[currentLevel].puzzles.length) currentPuzzle = 0;
          loadPuzzle();
          updateDisplay();
        }, 1500);
      } else {
        // wrong: show feedback message briefly
        feedbackEl.innerText = "❌ دوبارہ کوشش کریں";
        feedbackEl.style.display = 'block';
        setTimeout(() => {
          feedbackEl.style.display = 'none';
        }, 1400);
      }
    }

    // initialize
    updateLevelButtons();
    updateDisplay();
    loadPuzzle();

    // keyboard accessibility: number keys 1-4 select option in order
    window.addEventListener('keydown', (e) => {
      const opts = Array.from(document.querySelectorAll('.option'));
      if (!opts.length) return;
      if (e.key >= '1' && e.key <= String(opts.length)) {
        const idx = Number(e.key) - 1;
        opts[idx].click();
      }
      // left/right to change levels
      if (e.key === 'ArrowLeft') changeLevel(Math.max(0, currentLevel-1));
      if (e.key === 'ArrowRight') changeLevel(Math.min(levels.length-1, currentLevel+1));
    });
  </script>
</body>
</html>

